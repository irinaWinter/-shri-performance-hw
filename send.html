<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Store</title>
    <link href="./static/css/main.5e36d62c.chunk.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Stats -->
    <script src="send.js"></script>
    <script>
      let perfData = performance.timing;

      let counter = new Counter();

      counter.init(
        '00a7307d-de23-42c9-a8d5-b93199dcdb3e',
        String(Math.random()).substr(2, 12),
        'Store'
      );

      // const platform = !navigator.userAgentData.mobile ? 'desktop' : 'touch';

      // counter.setAdditionalParams({
      //   platform: platform,
      // });

      counter.send('connect', perfData.connectEnd - perfData.connectStart);
      counter.send('ttfb', perfData.responseEnd - perfData.requestStart);

      window.addEventListener('load', function () {
        navigator.vibrate(200);
        document.getElementById('mtp').textContent = navigator.userAgent;

        // pageLoad
        let now = new Date().getTime();
        let loadingTime = now - performance.timing.navigationStart;

        counter.send('pageLoad', loadingTime);

        // productListLoadTime
        var options = {
          root: document.querySelector('#root'),
          rootMargin: '0px',
          threshold: 0,
        };

        let productListLoadTimeCount = 0;

        const callback = function (entries, observer) {
          productListLoadTimeCount = productListLoadTimeCount + 1;

          if (productListLoadTimeCount === 2) {
            counter.send('productListLoadTime', entries[0].time);
            observer.disconnect();
          }
        };

        const observer = new IntersectionObserver(callback, options);
        const target = document.querySelector(
          '.loadingio-spinner-double-ring-cddhxrtz4nj'
        );

        observer.observe(target);
      });

      // Largest contentful paint (LCP)
      let lcpCount = 0;

      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          lcpCount = lcpCount + 1;
          if (lcpCount === 2) {
            counter.send('lsp', entry.startTime);
          }
        }
      }).observe({ type: 'largest-contentful-paint', buffered: true });
    </script>

    <!-- Content -->
    <div class="container" style="margin-bottom: 20px">
      <a class="container__button button" href="stats.html"
        >Посмотреть статистику</a
      >
      <p id="mtp">Девайс</p>
    </div>
    <div id="root"></div>
    <script>
      !(function (e) {
        function r(r) {
          for (
            var n, l, a = r[0], p = r[1], f = r[2], c = 0, s = [];
            c < a.length;
            c++
          )
            (l = a[c]),
              Object.prototype.hasOwnProperty.call(o, l) &&
                o[l] &&
                s.push(o[l][0]),
              (o[l] = 0);
          for (n in p)
            Object.prototype.hasOwnProperty.call(p, n) && (e[n] = p[n]);
          for (i && i(r); s.length; ) s.shift()();
          return u.push.apply(u, f || []), t();
        }
        function t() {
          for (var e, r = 0; r < u.length; r++) {
            for (var t = u[r], n = !0, a = 1; a < t.length; a++) {
              var p = t[a];
              0 !== o[p] && (n = !1);
            }
            n && (u.splice(r--, 1), (e = l((l.s = t[0]))));
          }
          return e;
        }
        var n = {},
          o = { 1: 0 },
          u = [];
        function l(r) {
          if (n[r]) return n[r].exports;
          var t = (n[r] = { i: r, l: !1, exports: {} });
          return e[r].call(t.exports, t, t.exports, l), (t.l = !0), t.exports;
        }
        (l.m = e),
          (l.c = n),
          (l.d = function (e, r, t) {
            l.o(e, r) ||
              Object.defineProperty(e, r, { enumerable: !0, get: t });
          }),
          (l.r = function (e) {
            'undefined' != typeof Symbol &&
              Symbol.toStringTag &&
              Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
              Object.defineProperty(e, '__esModule', { value: !0 });
          }),
          (l.t = function (e, r) {
            if ((1 & r && (e = l(e)), 8 & r)) return e;
            if (4 & r && 'object' == typeof e && e && e.__esModule) return e;
            var t = Object.create(null);
            if (
              (l.r(t),
              Object.defineProperty(t, 'default', { enumerable: !0, value: e }),
              2 & r && 'string' != typeof e)
            )
              for (var n in e)
                l.d(
                  t,
                  n,
                  function (r) {
                    return e[r];
                  }.bind(null, n)
                );
            return t;
          }),
          (l.n = function (e) {
            var r =
              e && e.__esModule
                ? function () {
                    return e.default;
                  }
                : function () {
                    return e;
                  };
            return l.d(r, 'a', r), r;
          }),
          (l.o = function (e, r) {
            return Object.prototype.hasOwnProperty.call(e, r);
          }),
          (l.p = './');
        var a = (this['webpackJsonpshop-react'] =
            this['webpackJsonpshop-react'] || []),
          p = a.push.bind(a);
        (a.push = r), (a = a.slice());
        for (var f = 0; f < a.length; f++) r(a[f]);
        var i = p;
        t();
      })([]);
    </script>
    <script src="./static/js/2.9468146c.chunk.js"></script>
    <script src="./static/js/main.6ec6d7d5.chunk.js"></script>
  </body>
</html>
